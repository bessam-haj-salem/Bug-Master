"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createModels = void 0;
const sequelize_1 = require("sequelize");
const Project_1 = require("./Project");
const Issues_1 = require("./Issues");
const Members_1 = require("./Members");
const MembersProject_1 = require("./MembersProject");
const IssuesMembers_1 = require("./IssuesMembers");
exports.createModels = (sequelizeConfig) => {
    const { database, username, password, params } = sequelizeConfig;
    const sequelize = new sequelize_1.Sequelize(database, username, password, params);
    const db = {
        sequelize,
        Sequelize: sequelize_1.Sequelize,
        Project: Project_1.ProjectFactory(sequelize, sequelize_1.Sequelize),
        Issues: Issues_1.IssuesFactory(sequelize, sequelize_1.Sequelize),
        Members: Members_1.MembersFactory(sequelize, sequelize_1.Sequelize),
        MembersProject: MembersProject_1.MembersProjectFactory(sequelize, sequelize_1.Sequelize),
        IssuesMembers: IssuesMembers_1.IssuesMembersFactory(sequelize, sequelize_1.Sequelize)
    };
    Object.keys(db).forEach((modelName) => {
        if (db[modelName].associate) {
            db[modelName].associate(db);
        }
    });
    return db;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYmFzc2VtL0RvY3VtZW50cy9QZXJzb25uZWxfUHJvamVjdC9idWctbWFzdGVyL2JhY2tlbmQvc2VydmVyL21vZGVscy10cy9pbmRleC50cyIsInNvdXJjZXMiOlsiL2hvbWUvYmFzc2VtL0RvY3VtZW50cy9QZXJzb25uZWxfUHJvamVjdC9idWctbWFzdGVyL2JhY2tlbmQvc2VydmVyL21vZGVscy10cy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx5Q0FBc0M7QUFFdEMsdUNBQTJDO0FBQzNDLHFDQUF5QztBQUN6Qyx1Q0FBMkM7QUFDM0MscURBQXlEO0FBQ3pELG1EQUF1RDtBQUMxQyxRQUFBLFlBQVksR0FBRyxDQUFDLGVBQW9CLEVBQWUsRUFBRTtJQUNoRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEdBQUcsZUFBZSxDQUFDO0lBQ2pFLE1BQU0sU0FBUyxHQUFHLElBQUkscUJBQVMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV0RSxNQUFNLEVBQUUsR0FBZ0I7UUFDdEIsU0FBUztRQUNULFNBQVMsRUFBVCxxQkFBUztRQUNULE9BQU8sRUFBRSx3QkFBYyxDQUFDLFNBQVMsRUFBRSxxQkFBUyxDQUFDO1FBQzdDLE1BQU0sRUFBRSxzQkFBYSxDQUFDLFNBQVMsRUFBRSxxQkFBUyxDQUFDO1FBQzNDLE9BQU8sRUFBRSx3QkFBYyxDQUFDLFNBQVMsRUFBRSxxQkFBUyxDQUFDO1FBQzdDLGNBQWMsRUFBRSxzQ0FBcUIsQ0FBQyxTQUFTLEVBQUUscUJBQVMsQ0FBQztRQUMzRCxhQUFhLEVBQUUsb0NBQW9CLENBQUMsU0FBUyxFQUFFLHFCQUFTLENBQUM7S0FDMUQsQ0FBQztJQUVGLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7UUFDcEMsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUFFO1lBQzNCLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDN0I7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sRUFBRSxDQUFDO0FBQ1osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VxdWVsaXplIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IERiSW50ZXJmYWNlIH0gZnJvbSAnLi4vdHlwaW5ncy9EYkludGVyZmFjZSc7XG5pbXBvcnQgeyBQcm9qZWN0RmFjdG9yeSB9IGZyb20gJy4vUHJvamVjdCc7XG5pbXBvcnQgeyBJc3N1ZXNGYWN0b3J5IH0gZnJvbSAnLi9Jc3N1ZXMnO1xuaW1wb3J0IHsgTWVtYmVyc0ZhY3RvcnkgfSBmcm9tICcuL01lbWJlcnMnO1xuaW1wb3J0IHsgTWVtYmVyc1Byb2plY3RGYWN0b3J5IH0gZnJvbSAnLi9NZW1iZXJzUHJvamVjdCc7XG5pbXBvcnQgeyBJc3N1ZXNNZW1iZXJzRmFjdG9yeSB9IGZyb20gJy4vSXNzdWVzTWVtYmVycyc7XG5leHBvcnQgY29uc3QgY3JlYXRlTW9kZWxzID0gKHNlcXVlbGl6ZUNvbmZpZzogYW55KTogRGJJbnRlcmZhY2UgPT4ge1xuICBjb25zdCB7IGRhdGFiYXNlLCB1c2VybmFtZSwgcGFzc3dvcmQsIHBhcmFtcyB9ID0gc2VxdWVsaXplQ29uZmlnO1xuICBjb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGRhdGFiYXNlLCB1c2VybmFtZSwgcGFzc3dvcmQsIHBhcmFtcyk7XG5cbiAgY29uc3QgZGI6IERiSW50ZXJmYWNlID0ge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBTZXF1ZWxpemUsXG4gICAgUHJvamVjdDogUHJvamVjdEZhY3Rvcnkoc2VxdWVsaXplLCBTZXF1ZWxpemUpLFxuICAgIElzc3VlczogSXNzdWVzRmFjdG9yeShzZXF1ZWxpemUsIFNlcXVlbGl6ZSksXG4gICAgTWVtYmVyczogTWVtYmVyc0ZhY3Rvcnkoc2VxdWVsaXplLCBTZXF1ZWxpemUpLFxuICAgIE1lbWJlcnNQcm9qZWN0OiBNZW1iZXJzUHJvamVjdEZhY3Rvcnkoc2VxdWVsaXplLCBTZXF1ZWxpemUpLFxuICAgIElzc3Vlc01lbWJlcnM6IElzc3Vlc01lbWJlcnNGYWN0b3J5KHNlcXVlbGl6ZSwgU2VxdWVsaXplKVxuICB9O1xuXG4gIE9iamVjdC5rZXlzKGRiKS5mb3JFYWNoKChtb2RlbE5hbWUpID0+IHtcbiAgICBpZiAoZGJbbW9kZWxOYW1lXS5hc3NvY2lhdGUpIHtcbiAgICAgIGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKGRiKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkYjtcbn07XG4iXX0=