"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
//sc
let express = require('express');
var str = '';
var sleep = require('sleep');
var Sequelize = require('sequelize');
let app = express();
// var fs = require('fs');
// let bodyParser = require('body-parser');
// let multer = require('multer');
// let upload = multer();
// let parser = require('xml2json');
// const xml2js = require('xml2js');
// const axios = require('axios');
// let xmlParser = require('xml2json'); //pour parser de xml-->json
// let convert = require('xml-js');
// var js2xmlparser = require('js2xmlparser'); //pour parser json--->xml
const Project = require('../controllers').project;
const Issues = require('../controllers').issues;
const Members = require('../controllers').members;
const MembersProject = require('../controllers').membersProject;
const IssuesMembers = require('../controllers');
let WebSocket = require('ws');
var path = require('path');
var formidable = require('formidable');
var fs = require('fs');
// api routes
// global error handler
module.exports = (app) => {
    app.use(function (req, res, next) {
        res.header('Access-Control-Allow-Origin', '*');
        res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept,uix,From,Authorization ');
        res.header('Access-Control-Allow-Methods', 'POST, GET, PUT, DELETE, OPTIONS');
        next();
    });
    var path = require('path');
    //**Project */
    app.post('/apiRF/Project/insert', Project.insertProject);
    app.put('/apiRF/Project/update/:id', Project.updateProject);
    app.get('/apiRF/Project/read/:id', Project.readProject);
    app.delete('/apiRF/Project/delete/:id', Project.deleteProject);
    app.post('/apiRF/Project/readPage', Project.readProjectChunk);
    //**Issues */
    app.post('/apiRF/Issues/insert', Issues.insertIssues);
    app.put('/apiRF/Issues/update/:id', Issues.updateIssues);
    app.get('/apiRF/Issues/read/:id', Issues.readIssues);
    app.delete('/apiRF/Issues/delete/:id', Issues.deleteIssues);
    app.post('/apiRF/Issues/readPage', Issues.readIssuesChunk);
    //**Members */
    app.post('/apiRF/Members/insert', Members.insertMembers);
    app.put('/apiRF/Members/update/:id', Members.updateMembers);
    app.get('/apiRF/Members/read/:id', Members.readMembers);
    app.delete('/apiRF/Members/delete/:id', Members.deleteMembers);
    app.post('/apiRF/Members/readPage', Members.readMembersChunk);
    //**MembersProject */
    app.post('/apiRF/MembersProject/insert', MembersProject.insertMembersProject);
    app.put('/apiRF/MembersProject/update/:id', MembersProject.updateMembersProject);
    app.get('/apiRF/MembersProject/read/:id', MembersProject.readMembersProject);
    app.delete('/apiRF/MembersProject/delete/:id', MembersProject.deleteMembersProject);
    app.post('/apiRF/MembersProject/readPage', MembersProject.readMembersProjectChunk);
    //**IssuesMembers */
    app.post('/apiRF/IssuesMembers/insert', IssuesMembers.insertIssuesMembers);
    app.put('/apiRF/IssuesMembers/update/:id', IssuesMembers.updateIssuesMembers);
    app.get('/apiRF/IssuesMembers/read/:id', IssuesMembers.readIssuesMembers);
    app.delete('/apiRF/IssuesMembers/delete/:id', IssuesMembers.deleteIssuesMembers);
    app.post('/apiRF/IssuesMembers/readPage', IssuesMembers.readIssuesMembersChunk);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYmFzc2VtL0RvY3VtZW50cy9QZXJzb25uZWxfUHJvamVjdC9idWctbWFzdGVyL2JhY2tlbmQvc2VydmVyL3JvdXRlcy9pbmRleC50cyIsInNvdXJjZXMiOlsiL2hvbWUvYmFzc2VtL0RvY3VtZW50cy9QZXJzb25uZWxfUHJvamVjdC9idWctbWFzdGVyL2JhY2tlbmQvc2VydmVyL3JvdXRlcy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUk7QUFDSixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakMsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRTdCLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUVyQyxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQztBQUNwQiwwQkFBMEI7QUFDMUIsMkNBQTJDO0FBQzNDLGtDQUFrQztBQUNsQyx5QkFBeUI7QUFDekIsb0NBQW9DO0FBQ3BDLG9DQUFvQztBQUNwQyxrQ0FBa0M7QUFFbEMsbUVBQW1FO0FBQ25FLG1DQUFtQztBQUNuQyx3RUFBd0U7QUFFeEUsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ2xELE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNoRCxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDbEQsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsY0FBYyxDQUFDO0FBQ2hFLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0FBSy9DLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM5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Y0FBYyxDQUFDLHVCQUF1QixDQUFDLENBQUM7SUFDbkYsb0JBQW9CO0lBQ3BCLEdBQUcsQ0FBQyxJQUFJLENBQUMsNkJBQTZCLEVBQUUsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDM0UsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsRUFBRSxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUM5RSxHQUFHLENBQUMsR0FBRyxDQUFDLCtCQUErQixFQUFFLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQzFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsaUNBQWlDLEVBQUUsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakYsR0FBRyxDQUFDLElBQUksQ0FBQywrQkFBK0IsRUFBRSxhQUFhLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUNsRixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvL3NjXG5sZXQgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciBzdHIgPSAnJztcbnZhciBzbGVlcCA9IHJlcXVpcmUoJ3NsZWVwJyk7XG5cbnZhciBTZXF1ZWxpemUgPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcblxubGV0IGFwcCA9IGV4cHJlc3MoKTtcbi8vIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4vLyBsZXQgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG4vLyBsZXQgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XG4vLyBsZXQgdXBsb2FkID0gbXVsdGVyKCk7XG4vLyBsZXQgcGFyc2VyID0gcmVxdWlyZSgneG1sMmpzb24nKTtcbi8vIGNvbnN0IHhtbDJqcyA9IHJlcXVpcmUoJ3htbDJqcycpO1xuLy8gY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xuXG4vLyBsZXQgeG1sUGFyc2VyID0gcmVxdWlyZSgneG1sMmpzb24nKTsgLy9wb3VyIHBhcnNlciBkZSB4bWwtLT5qc29uXG4vLyBsZXQgY29udmVydCA9IHJlcXVpcmUoJ3htbC1qcycpO1xuLy8gdmFyIGpzMnhtbHBhcnNlciA9IHJlcXVpcmUoJ2pzMnhtbHBhcnNlcicpOyAvL3BvdXIgcGFyc2VyIGpzb24tLS0+eG1sXG5cbmNvbnN0IFByb2plY3QgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycycpLnByb2plY3Q7XG5jb25zdCBJc3N1ZXMgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycycpLmlzc3VlcztcbmNvbnN0IE1lbWJlcnMgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycycpLm1lbWJlcnM7XG5jb25zdCBNZW1iZXJzUHJvamVjdCA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzJykubWVtYmVyc1Byb2plY3Q7XG5jb25zdCBJc3N1ZXNNZW1iZXJzID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMnKVxuLy9jb25zdCBhdXRoPSByZXF1aXJlKCcuLi9jb250cm9sbGVycycpLmF1dGg7XG5cbmltcG9ydCAqIGFzIHByb2Nlc3N1cyBmcm9tICdjaGlsZF9wcm9jZXNzJztcblxubGV0IFdlYlNvY2tldCA9IHJlcXVpcmUoJ3dzJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBmb3JtaWRhYmxlID0gcmVxdWlyZSgnZm9ybWlkYWJsZScpO1xudmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuLy8gYXBpIHJvdXRlc1xuXG4vLyBnbG9iYWwgZXJyb3IgaGFuZGxlclxuXG5tb2R1bGUuZXhwb3J0cyA9IChhcHApID0+IHtcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gICAgcmVzLmhlYWRlcihcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJyxcbiAgICAgICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0LHVpeCxGcm9tLEF1dGhvcml6YXRpb24gJ1xuICAgICk7XG4gICAgcmVzLmhlYWRlcihcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJyxcbiAgICAgICdQT1NULCBHRVQsIFBVVCwgREVMRVRFLCBPUFRJT05TJ1xuICAgICk7XG5cbiAgICBuZXh0KCk7XG4gIH0pO1xuICB2YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuICAvLyoqUHJvamVjdCAqL1xuICBhcHAucG9zdCgnL2FwaVJGL1Byb2plY3QvaW5zZXJ0JywgUHJvamVjdC5pbnNlcnRQcm9qZWN0KTtcbiAgYXBwLnB1dCgnL2FwaVJGL1Byb2plY3QvdXBkYXRlLzppZCcsIFByb2plY3QudXBkYXRlUHJvamVjdCk7XG4gIGFwcC5nZXQoJy9hcGlSRi9Qcm9qZWN0L3JlYWQvOmlkJywgUHJvamVjdC5yZWFkUHJvamVjdCk7XG4gIGFwcC5kZWxldGUoJy9hcGlSRi9Qcm9qZWN0L2RlbGV0ZS86aWQnLCBQcm9qZWN0LmRlbGV0ZVByb2plY3QpO1xuICBhcHAucG9zdCgnL2FwaVJGL1Byb2plY3QvcmVhZFBhZ2UnLCBQcm9qZWN0LnJlYWRQcm9qZWN0Q2h1bmspO1xuICAvLyoqSXNzdWVzICovXG4gIGFwcC5wb3N0KCcvYXBpUkYvSXNzdWVzL2luc2VydCcsIElzc3Vlcy5pbnNlcnRJc3N1ZXMpO1xuICBhcHAucHV0KCcvYXBpUkYvSXNzdWVzL3VwZGF0ZS86aWQnLCBJc3N1ZXMudXBkYXRlSXNzdWVzKTtcbiAgYXBwLmdldCgnL2FwaVJGL0lzc3Vlcy9yZWFkLzppZCcsIElzc3Vlcy5yZWFkSXNzdWVzKTtcbiAgYXBwLmRlbGV0ZSgnL2FwaVJGL0lzc3Vlcy9kZWxldGUvOmlkJywgSXNzdWVzLmRlbGV0ZUlzc3Vlcyk7XG4gIGFwcC5wb3N0KCcvYXBpUkYvSXNzdWVzL3JlYWRQYWdlJywgSXNzdWVzLnJlYWRJc3N1ZXNDaHVuayk7XG4gIC8vKipNZW1iZXJzICovXG4gIGFwcC5wb3N0KCcvYXBpUkYvTWVtYmVycy9pbnNlcnQnLCBNZW1iZXJzLmluc2VydE1lbWJlcnMpO1xuICBhcHAucHV0KCcvYXBpUkYvTWVtYmVycy91cGRhdGUvOmlkJywgTWVtYmVycy51cGRhdGVNZW1iZXJzKTtcbiAgYXBwLmdldCgnL2FwaVJGL01lbWJlcnMvcmVhZC86aWQnLCBNZW1iZXJzLnJlYWRNZW1iZXJzKTtcbiAgYXBwLmRlbGV0ZSgnL2FwaVJGL01lbWJlcnMvZGVsZXRlLzppZCcsIE1lbWJlcnMuZGVsZXRlTWVtYmVycyk7XG4gIGFwcC5wb3N0KCcvYXBpUkYvTWVtYmVycy9yZWFkUGFnZScsIE1lbWJlcnMucmVhZE1lbWJlcnNDaHVuayk7XG4gIC8vKipNZW1iZXJzUHJvamVjdCAqL1xuICBhcHAucG9zdCgnL2FwaVJGL01lbWJlcnNQcm9qZWN0L2luc2VydCcsIE1lbWJlcnNQcm9qZWN0Lmluc2VydE1lbWJlcnNQcm9qZWN0KTtcbiAgYXBwLnB1dCgnL2FwaVJGL01lbWJlcnNQcm9qZWN0L3VwZGF0ZS86aWQnLCBNZW1iZXJzUHJvamVjdC51cGRhdGVNZW1iZXJzUHJvamVjdCk7XG4gIGFwcC5nZXQoJy9hcGlSRi9NZW1iZXJzUHJvamVjdC9yZWFkLzppZCcsIE1lbWJlcnNQcm9qZWN0LnJlYWRNZW1iZXJzUHJvamVjdCk7XG4gIGFwcC5kZWxldGUoJy9hcGlSRi9NZW1iZXJzUHJvamVjdC9kZWxldGUvOmlkJywgTWVtYmVyc1Byb2plY3QuZGVsZXRlTWVtYmVyc1Byb2plY3QpO1xuICBhcHAucG9zdCgnL2FwaVJGL01lbWJlcnNQcm9qZWN0L3JlYWRQYWdlJywgTWVtYmVyc1Byb2plY3QucmVhZE1lbWJlcnNQcm9qZWN0Q2h1bmspO1xuICAvLyoqSXNzdWVzTWVtYmVycyAqL1xuICBhcHAucG9zdCgnL2FwaVJGL0lzc3Vlc01lbWJlcnMvaW5zZXJ0JywgSXNzdWVzTWVtYmVycy5pbnNlcnRJc3N1ZXNNZW1iZXJzKTtcbiAgYXBwLnB1dCgnL2FwaVJGL0lzc3Vlc01lbWJlcnMvdXBkYXRlLzppZCcsIElzc3Vlc01lbWJlcnMudXBkYXRlSXNzdWVzTWVtYmVycyk7XG4gIGFwcC5nZXQoJy9hcGlSRi9Jc3N1ZXNNZW1iZXJzL3JlYWQvOmlkJywgSXNzdWVzTWVtYmVycy5yZWFkSXNzdWVzTWVtYmVycyk7XG4gIGFwcC5kZWxldGUoJy9hcGlSRi9Jc3N1ZXNNZW1iZXJzL2RlbGV0ZS86aWQnLCBJc3N1ZXNNZW1iZXJzLmRlbGV0ZUlzc3Vlc01lbWJlcnMpO1xuICBhcHAucG9zdCgnL2FwaVJGL0lzc3Vlc01lbWJlcnMvcmVhZFBhZ2UnLCBJc3N1ZXNNZW1iZXJzLnJlYWRJc3N1ZXNNZW1iZXJzQ2h1bmspO1xufTtcbiJdfQ==